# xlua-persistence Example

This is a complete `xlua` dataref persistence module example for X-Plane 11/12 using the `xlua` plugin.

## ðŸ“„ Files

- `ACF_data.lua`: Main script to be placed under `plugins/xlua/scripts/ACF_data/`
- `ACF_data.json`: Example output JSON generated by the script.

## ðŸ’¾ Features

- Tracks and saves:
  - Simple datarefs (e.g. `dataref_name1`, `dataref_name2`)
  - Indexed array datarefs (e.g. `dataref_array_name[1-3]`)
- Loads and restores saved data when the aircraft is loaded
- Fully inline JSON parser and writerâ€”no external dependencies

## ðŸ“‚ Folder Structure

```
YourAircraft/
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ xlua/
â”‚       â””â”€â”€ scripts/
â”‚           â””â”€â”€ ACF_data/
â”‚               â”œâ”€â”€ ACF_data.lua
â”‚               â””â”€â”€ ACF_data.json
```

## ðŸ”„ Usage

- Add your desired datarefs using `find_dataref(...)`
- Adjust the indexed array loop size if needed
- Use `aircraft_load` and `aircraft_unload` callbacks to handle persistence automatically

## ðŸ“˜ Example JSON Output

```json
{
  "dataref_name1": 1.0,
  "dataref_name2": 0.5,
  "dataref_array": {
    "1": 0.8,
    "2": 0.75,
    "3": 0.9
  }
}
```

## ðŸ§ª Tested With

- X-Plane 12 + xlua v1.2+
- Lua 5.1 syntax

## ðŸªª License

MIT License Â© 2025 emiliovfx
